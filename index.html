<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>FULLSCREEN AIRHORN</title>

<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: red;
  }

  #fullscreenButton {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 60px;
    color: white;
    font-family: Arial, sans-serif;
    cursor: pointer;
    user-select: none;
  }
</style>

<!-- Socket.IO -->
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

</head>

<body>

<div id="fullscreenButton" onclick="activateAudio()">
  TAP HERE ðŸ”Š
</div>

<audio id="sound" src="airhorn.mp3"></audio>

<script>

let socket;
let audioEnabled = false;
const audio = document.getElementById("sound");

// Wird beim ersten Tippen aktiviert (wichtig fÃ¼r iPhone)
function activateAudio() {
  audio.loop = true;
  audio.currentTime = 0;
  audio.play();
  audioEnabled = true;

  if (!socket) {
    connectSocket();
  }
}

// Verbindung zum Render-Server
function connectSocket() {
  socket = io("https://telegram-horn-remote.onrender.com");

  socket.on("connect", () => {
    console.log("Mit Server verbunden");
  });

  socket.on("horn_signal", () => {
    if (audioEnabled) {
      audio.currentTime = 0;
      audio.play();
    }
  });

  socket.on("disconnect", () => {
    console.log("Verbindung getrennt");
  });
}

</script>

</body>
</html>
